<!DOCTYPE html>
<html>
<head>
	<title>GVV - Authorization Migration Dashboard</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Bootstrap 5 -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

	<!-- jQuery -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

	<style>
		.metric-card {
			border-left: 4px solid;
			transition: transform 0.2s;
		}
		.metric-card:hover {
			transform: translateY(-5px);
		}
		.metric-card.success { border-color: #28a745; }
		.metric-card.warning { border-color: #ffc107; }
		.metric-card.danger { border-color: #dc3545; }
		.metric-card.info { border-color: #17a2b8; }

		.progress-bar-animated {
			animation: progress-animation 2s ease-in-out;
		}

		@keyframes progress-animation {
			0% { width: 0%; }
		}

		.user-badge {
			display: inline-block;
			padding: 0.25rem 0.5rem;
			border-radius: 0.25rem;
			font-size: 0.875rem;
			margin: 0.125rem;
		}

		.badge-migrated { background-color: #d4edda; color: #155724; }
		.badge-pending { background-color: #fff3cd; color: #856404; }
		.badge-error { background-color: #f8d7da; color: #721c24; }
	</style>
</head>
<body>

<!-- Navbar (simplified) -->
<nav class="navbar navbar-expand-sm navbar-dark bg-dark pb-3" style="position: sticky; top: 0; z-index: 1000;">
	<div class="container-fluid">
		<a class="navbar-brand" href="#">GVV</a>
		<div class="text-white ms-auto">
			<span>Admin - Migration Dashboard</span>
		</div>
	</div>
</nav>

<header class="container-fluid p-3 bg-success text-white text-center">
	<h1>Authorization System Migration Dashboard</h1>
	<p class="mb-0">Progressive migration from hierarchical to flat role-based authorization</p>
</header>

<div class="container-fluid mt-4">

	<!-- Status Overview Cards -->
	<div class="row mb-4">
		<div class="col-md-3">
			<div class="card metric-card success">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-center">
						<div>
							<h6 class="text-muted mb-1">Migrated Users</h6>
							<h2 class="mb-0">42</h2>
							<small class="text-muted">of 292 total users</small>
						</div>
						<div class="text-success">
							<i class="fas fa-user-check fa-3x"></i>
						</div>
					</div>
					<div class="progress mt-3" style="height: 8px;">
						<div class="progress-bar bg-success progress-bar-animated" role="progressbar"
							 style="width: 14.4%" aria-valuenow="42" aria-valuemin="0" aria-valuemax="292">
						</div>
					</div>
					<small class="text-muted">14.4% complete</small>
				</div>
			</div>
		</div>

		<div class="col-md-3">
			<div class="card metric-card info">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-center">
						<div>
							<h6 class="text-muted mb-1">Early Adopters</h6>
							<h2 class="mb-0">5</h2>
							<small class="text-muted">Testing new system</small>
						</div>
						<div class="text-info">
							<i class="fas fa-flask fa-3x"></i>
						</div>
					</div>
					<div class="mt-3">
						<span class="badge bg-info">Admin: 2</span>
						<span class="badge bg-info">CA: 2</span>
						<span class="badge bg-info">User: 1</span>
					</div>
				</div>
			</div>
		</div>

		<div class="col-md-3">
			<div class="card metric-card warning">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-center">
						<div>
							<h6 class="text-muted mb-1">Old System</h6>
							<h2 class="mb-0">250</h2>
							<small class="text-muted">Using DX_Auth</small>
						</div>
						<div class="text-warning">
							<i class="fas fa-clock fa-3x"></i>
						</div>
					</div>
					<div class="mt-3">
						<small class="text-muted">Awaiting migration</small>
					</div>
				</div>
			</div>
		</div>

		<div class="col-md-3">
			<div class="card metric-card danger">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-center">
						<div>
							<h6 class="text-muted mb-1">Errors</h6>
							<h2 class="mb-0">2</h2>
							<small class="text-muted">Need attention</small>
						</div>
						<div class="text-danger">
							<i class="fas fa-exclamation-triangle fa-3x"></i>
						</div>
					</div>
					<div class="mt-3">
						<button class="btn btn-sm btn-danger">View Errors</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- System Status -->
	<div class="row mb-4">
		<div class="col-md-6">
			<div class="card">
				<div class="card-header bg-primary text-white">
					<h5 class="mb-0"><i class="fas fa-cog"></i> System Configuration</h5>
				</div>
				<div class="card-body">
					<table class="table table-sm">
						<tr>
							<td><strong>Global Migration Mode:</strong></td>
							<td>
								<span class="badge bg-warning">DUAL MODE</span>
								<button class="btn btn-sm btn-success float-end">Enable for All</button>
							</td>
						</tr>
						<tr>
							<td><strong>Early Permission Setup:</strong></td>
							<td><span class="badge bg-success">ENABLED</span></td>
						</tr>
						<tr>
							<td><strong>Audit Logging:</strong></td>
							<td><span class="badge bg-success">ACTIVE</span></td>
						</tr>
						<tr>
							<td><strong>Old System:</strong></td>
							<td><span class="badge bg-info">ACTIVE (DX_Auth)</span></td>
						</tr>
						<tr>
							<td><strong>New System:</strong></td>
							<td><span class="badge bg-info">ACTIVE (Gvv_Authorization)</span></td>
						</tr>
					</table>

					<div class="alert alert-info mb-0">
						<i class="fas fa-info-circle"></i>
						Both systems running in parallel. Users routed based on migration status.
					</div>
				</div>
			</div>
		</div>

		<div class="col-md-6">
			<div class="card">
				<div class="card-header bg-success text-white">
					<h5 class="mb-0"><i class="fas fa-chart-line"></i> Migration Progress by Role</h5>
				</div>
				<div class="card-body">
					<div class="mb-3">
						<div class="d-flex justify-content-between">
							<span>Admin (10 users)</span>
							<span class="text-success">10/10 (100%)</span>
						</div>
						<div class="progress" style="height: 20px;">
							<div class="progress-bar bg-success" style="width: 100%">100%</div>
						</div>
					</div>

					<div class="mb-3">
						<div class="d-flex justify-content-between">
							<span>Bureau (15 users)</span>
							<span class="text-warning">12/15 (80%)</span>
						</div>
						<div class="progress" style="height: 20px;">
							<div class="progress-bar bg-warning" style="width: 80%">80%</div>
						</div>
					</div>

					<div class="mb-3">
						<div class="d-flex justify-content-between">
							<span>CA (25 users)</span>
							<span class="text-info">10/25 (40%)</span>
						</div>
						<div class="progress" style="height: 20px;">
							<div class="progress-bar bg-info" style="width: 40%">40%</div>
						</div>
					</div>

					<div class="mb-3">
						<div class="d-flex justify-content-between">
							<span>Planchiste (80 users)</span>
							<span class="text-danger">5/80 (6%)</span>
						</div>
						<div class="progress" style="height: 20px;">
							<div class="progress-bar bg-danger" style="width: 6%">6%</div>
						</div>
					</div>

					<div>
						<div class="d-flex justify-content-between">
							<span>Members (162 users)</span>
							<span class="text-danger">5/162 (3%)</span>
						</div>
						<div class="progress" style="height: 20px;">
							<div class="progress-bar bg-danger" style="width: 3%">3%</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Quick Actions -->
	<div class="card mb-4">
		<div class="card-header bg-dark text-white">
			<h5 class="mb-0"><i class="fas fa-bolt"></i> Quick Actions</h5>
		</div>
		<div class="card-body">
			<div class="row">
				<div class="col-md-3">
					<button class="btn btn-primary w-100 mb-2">
						<i class="fas fa-users"></i><br>
						Migrate Users
					</button>
					<small class="text-muted d-block text-center">Select users to migrate</small>
				</div>
				<div class="col-md-3">
					<button class="btn btn-info w-100 mb-2">
						<i class="fas fa-user-shield"></i><br>
						Assign Roles
					</button>
					<small class="text-muted d-block text-center">Bulk role assignment</small>
				</div>
				<div class="col-md-3">
					<button class="btn btn-warning w-100 mb-2">
						<i class="fas fa-undo"></i><br>
						Rollback User
					</button>
					<small class="text-muted d-block text-center">Revert to old system</small>
				</div>
				<div class="col-md-3">
					<button class="btn btn-success w-100 mb-2">
						<i class="fas fa-clipboard-check"></i><br>
						Audit Log
					</button>
					<small class="text-muted d-block text-center">View authorization events</small>
				</div>
			</div>
		</div>
	</div>

	<!-- Recent Migration Activity -->
	<div class="card mb-4">
		<div class="card-header">
			<h5 class="mb-0"><i class="fas fa-history"></i> Recent Migration Activity</h5>
		</div>
		<div class="card-body">
			<table class="table table-sm table-striped">
				<thead>
					<tr>
						<th>Time</th>
						<th>User</th>
						<th>Action</th>
						<th>Old Role</th>
						<th>New Roles</th>
						<th>By</th>
						<th>Status</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>10:23:45</td>
						<td>jdupont</td>
						<td><span class="badge bg-success">MIGRATED</span></td>
						<td>ca</td>
						<td>
							<span class="badge bg-primary">ca@Planeur</span>
							<span class="badge bg-primary">user@ULM</span>
						</td>
						<td>admin</td>
						<td><i class="fas fa-check-circle text-success"></i></td>
					</tr>
					<tr>
						<td>10:18:32</td>
						<td>mmartin</td>
						<td><span class="badge bg-success">MIGRATED</span></td>
						<td>planchiste</td>
						<td><span class="badge bg-primary">planchiste@Planeur</span></td>
						<td>admin</td>
						<td><i class="fas fa-check-circle text-success"></i></td>
					</tr>
					<tr>
						<td>10:12:18</td>
						<td>pbernard</td>
						<td><span class="badge bg-warning">ROLLBACK</span></td>
						<td>ca</td>
						<td><span class="text-muted">Reverted</span></td>
						<td>admin</td>
						<td><i class="fas fa-undo text-warning"></i></td>
					</tr>
					<tr>
						<td>09:54:12</td>
						<td>fdupuis</td>
						<td><span class="badge bg-success">MIGRATED</span></td>
						<td>tresorier</td>
						<td><span class="badge bg-primary">tresorier@Planeur</span></td>
						<td>admin</td>
						<td><i class="fas fa-check-circle text-success"></i></td>
					</tr>
					<tr>
						<td>09:43:05</td>
						<td>arobert</td>
						<td><span class="badge bg-danger">ERROR</span></td>
						<td>bureau</td>
						<td><span class="text-danger">Failed</span></td>
						<td>admin</td>
						<td><i class="fas fa-exclamation-triangle text-danger"></i></td>
					</tr>
				</tbody>
			</table>
			<button class="btn btn-sm btn-secondary float-end">View Full Log</button>
		</div>
	</div>

	<!-- Section-Specific Status -->
	<div class="card mb-4">
		<div class="card-header">
			<h5 class="mb-0"><i class="fas fa-sitemap"></i> Migration Status by Section</h5>
		</div>
		<div class="card-body">
			<div class="row">
				<div class="col-md-3">
					<div class="card border-primary">
						<div class="card-header bg-primary text-white">
							<strong>Planeur</strong>
						</div>
						<div class="card-body">
							<p class="mb-2"><strong>Total Users:</strong> 180</p>
							<p class="mb-2"><strong>Migrated:</strong> 25 (14%)</p>
							<div class="progress mb-2">
								<div class="progress-bar bg-primary" style="width: 14%"></div>
							</div>
							<button class="btn btn-sm btn-primary w-100">Migrate Section</button>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="card border-success">
						<div class="card-header bg-success text-white">
							<strong>ULM</strong>
						</div>
						<div class="card-body">
							<p class="mb-2"><strong>Total Users:</strong> 45</p>
							<p class="mb-2"><strong>Migrated:</strong> 8 (18%)</p>
							<div class="progress mb-2">
								<div class="progress-bar bg-success" style="width: 18%"></div>
							</div>
							<button class="btn btn-sm btn-success w-100">Migrate Section</button>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="card border-warning">
						<div class="card-header bg-warning text-dark">
							<strong>Avion</strong>
						</div>
						<div class="card-body">
							<p class="mb-2"><strong>Total Users:</strong> 32</p>
							<p class="mb-2"><strong>Migrated:</strong> 5 (16%)</p>
							<div class="progress mb-2">
								<div class="progress-bar bg-warning" style="width: 16%"></div>
							</div>
							<button class="btn btn-sm btn-warning w-100">Migrate Section</button>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="card border-info">
						<div class="card-header bg-info text-white">
							<strong>Général</strong>
						</div>
						<div class="card-body">
							<p class="mb-2"><strong>Total Users:</strong> 35</p>
							<p class="mb-2"><strong>Migrated:</strong> 4 (11%)</p>
							<div class="progress mb-2">
								<div class="progress-bar bg-info" style="width: 11%"></div>
							</div>
							<button class="btn btn-sm btn-info w-100">Migrate Section</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

</div>

<footer class="container-fluid p-3 mt-3 bg-success text-white text-center">
	<p class="mb-0">GVV Authorization Migration Dashboard - Mockup</p>
</footer>

<script>
$(document).ready(function() {
	// Simulate real-time updates
	setInterval(function() {
		// Could update metrics via AJAX
	}, 5000);
});
</script>

</body>
</html>
